<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RWA项目设置向导</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Microsoft YaHei', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .setup-container {
            max-width: 900px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            overflow: hidden;
        }

        .setup-header {
            background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
            color: white;
            padding: 30px;
            text-align: center;
            position: relative;
        }

        .setup-header::before {
            content: "元话RWA";
            position: absolute;
            top: 15px;
            right: 25px;
            font-size: 12px;
            opacity: 0.7;
        }

        .setup-header h1 {
            font-size: 2.2rem;
            margin-bottom: 8px;
            font-weight: 700;
        }
        
        .wallet-status {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            padding: 10px 15px;
            margin-top: 15px;
            font-size: 0.9rem;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }
        
        .wallet-status.connected {
            background: rgba(34, 197, 94, 0.2);
            border: 1px solid rgba(34, 197, 94, 0.3);
        }
        
        .wallet-status.not-connected {
            background: rgba(239, 68, 68, 0.2);
            border: 1px solid rgba(239, 68, 68, 0.3);
        }
        
        .wallet-icon {
            font-size: 1.1rem;
        }

        .setup-header p {
            font-size: 1rem;
            opacity: 0.9;
        }

        /* 进度指示器 */
        .progress-container {
            background: white;
            padding: 30px 40px;
            border-bottom: 1px solid #e0e0e0;
        }

        .progress-bar {
            display: flex;
            justify-content: space-between;
            align-items: center;
            position: relative;
            margin-bottom: 20px;
        }

        .progress-line {
            position: absolute;
            top: 20px;
            left: 0;
            right: 0;
            height: 3px;
            background: #e0e0e0;
            z-index: 1;
        }

        .progress-line-active {
            position: absolute;
            top: 20px;
            left: 0;
            height: 3px;
            background: linear-gradient(90deg, #667eea, #764ba2);
            z-index: 2;
            transition: width 0.5s ease;
        }

        .step {
            display: flex;
            flex-direction: column;
            align-items: center;
            position: relative;
            z-index: 3;
        }

        .step-circle {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: #e0e0e0;
            color: #999;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 14px;
            transition: all 0.3s ease;
            margin-bottom: 8px;
        }

        .step.active .step-circle {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            transform: scale(1.1);
        }

        .step.completed .step-circle {
            background: #28a745;
            color: white;
        }

        .step-label {
            font-size: 12px;
            color: #666;
            text-align: center;
            max-width: 80px;
            line-height: 1.2;
        }

        .step.active .step-label {
            color: #1e3c72;
            font-weight: 600;
        }

        /* 步骤内容区域 */
        .step-content {
            padding: 40px;
            min-height: 500px;
        }

        .step-panel {
            display: none;
            animation: fadeIn 0.3s ease;
        }

        .step-panel.active {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .step-title {
            font-size: 1.8rem;
            color: #1e3c72;
            margin-bottom: 8px;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .step-subtitle {
            font-size: 1rem;
            color: #666;
            margin-bottom: 30px;
            line-height: 1.5;
        }

        .step-icon {
            font-size: 1.5rem;
        }

        /* 导航按钮 */
        .step-navigation {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 30px 40px;
            background: #f8f9fa;
            border-top: 1px solid #e0e0e0;
        }

        .nav-btn {
            padding: 12px 24px;
            border: none;
            border-radius: 8px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            min-width: 100px;
        }

        .btn-prev {
            background: #6c757d;
            color: white;
        }

        .btn-prev:hover {
            background: #5a6268;
            transform: translateY(-1px);
        }

        .btn-next {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
        }

        .btn-next:hover {
            transform: translateY(-1px);
            box-shadow: 0 4px 12px rgba(102, 126, 234, 0.3);
        }

        .btn-submit {
            background: linear-gradient(135deg, #28a745, #20c997);
            color: white;
        }

        .btn-submit:hover {
            transform: translateY(-1px);
            box-shadow: 0 4px 12px rgba(40, 167, 69, 0.3);
        }

        .btn-disabled {
            background: #e9ecef !important;
            color: #6c757d !important;
            cursor: not-allowed !important;
            transform: none !important;
        }

        .step-info {
            text-align: center;
            color: #666;
            font-size: 0.9rem;
        }

        .form-group {
            margin-bottom: 25px;
        }

        .form-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-bottom: 25px;
        }

        .form-row.single {
            grid-template-columns: 1fr;
        }

        .form-row.triple {
            grid-template-columns: 1fr 1fr 1fr;
        }

        label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: #333;
            font-size: 1rem;
        }

        .required {
            color: #e74c3c;
        }

        .field-description {
            font-size: 12px;
            color: #666;
            margin-top: 5px;
            padding: 8px 12px;
            background: #f8f9fa;
            border-left: 3px solid #007bff;
            border-radius: 0 4px 4px 0;
            line-height: 1.4;
        }

        input, select, textarea {
            width: 100%;
            padding: 12px 15px;
            border: 2px solid #e0e0e0;
            border-radius: 10px;
            font-size: 1rem;
            transition: all 0.3s ease;
            background: #fafafa;
        }

        input:focus, select:focus, textarea:focus {
            outline: none;
            border-color: #667eea;
            background: white;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }

        textarea {
            resize: vertical;
            min-height: 100px;
        }

        .checkbox-group {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
            gap: 15px;
            margin-top: 10px;
        }

        .checkbox-item {
            display: flex;
            align-items: center;
            padding: 12px;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            transition: all 0.3s ease;
            cursor: pointer;
            background: #fafafa;
        }

        .checkbox-item:hover {
            border-color: #667eea;
            background: #f8f9ff;
        }

        .checkbox-item input[type="checkbox"] {
            width: auto;
            margin-right: 10px;
            transform: scale(1.2);
        }

        .radio-group {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 10px;
            margin-top: 10px;
        }

        .radio-item {
            display: flex;
            align-items: center;
            padding: 10px;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            transition: all 0.3s ease;
            cursor: pointer;
            background: #fafafa;
        }

        .radio-item:hover {
            border-color: #667eea;
            background: #f8f9ff;
        }

        .radio-item input[type="radio"] {
            width: auto;
            margin-right: 10px;
            transform: scale(1.2);
        }

        .submit-section {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            margin: 40px -40px -40px -40px;
            padding: 40px;
            text-align: center;
        }

        .submit-btn {
            background: white;
            color: #1e3c72;
            border: none;
            padding: 15px 40px;
            font-size: 1.2rem;
            font-weight: 600;
            border-radius: 50px;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }

        .submit-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(0,0,0,0.3);
        }

        .note {
            background: #fff3cd;
            border: 1px solid #ffeaa7;
            border-radius: 10px;
            padding: 15px;
            margin-bottom: 20px;
            color: #856404;
        }

        .warning-note {
            background: #f8d7da;
            border: 1px solid #f5c6cb;
            border-radius: 10px;
            padding: 15px;
            margin-bottom: 20px;
            color: #721c24;
        }

        .info-box {
            background: #e7f3ff;
            border: 2px solid #b3d9ff;
            border-radius: 10px;
            padding: 15px;
            margin: 15px 0;
            font-size: 0.9rem;
        }

        .subsection {
            background: #f8f9fa;
            border-left: 4px solid #667eea;
            padding: 20px;
            margin: 20px 0;
            border-radius: 0 10px 10px 0;
        }

        .subsection-title {
            font-size: 1.2rem;
            color: #1e3c72;
            margin-bottom: 15px;
            font-weight: 600;
        }

        @media (max-width: 768px) {
            .form-row, .form-row.triple {
                grid-template-columns: 1fr;
            }
            
            .header h1 {
                font-size: 2rem;
            }
            
            .form-container {
                padding: 20px;
            }
            
            .section {
                padding: 20px;
            }
        }
    </style>
</head>
<body>
    <div class="setup-container">
        <div class="setup-header">
            <h1>🚀 RWA项目设置向导</h1>
            <p>让我们一步步完成您的现实世界资产数字化项目配置</p>
            <div id="walletStatusForm" class="wallet-status">
                <span class="wallet-icon">🔗</span>
                <span id="walletStatusText">检查钱包连接状态...</span>
            </div>
        </div>

        <!-- 进度指示器 -->
        <div class="progress-container">
            <div class="progress-bar">
                <div class="progress-line"></div>
                <div class="progress-line-active" id="progressLine"></div>
                
                <div class="step active" data-step="1">
                    <div class="step-circle">1</div>
                    <div class="step-label">项目基础</div>
                </div>
                <div class="step" data-step="2">
                    <div class="step-circle">2</div>
                    <div class="step-label">资产信息</div>
                </div>
                <div class="step" data-step="3">
                    <div class="step-circle">3</div>
                    <div class="step-label">财务规划</div>
                </div>
                <div class="step" data-step="4">
                    <div class="step-circle">4</div>
                    <div class="step-label">代币设计</div>
                </div>
                <div class="step" data-step="5">
                    <div class="step-circle">5</div>
                    <div class="step-label">合规要求</div>
                </div>
                <div class="step" data-step="6">
                    <div class="step-circle">6</div>
                    <div class="step-label">完成设置</div>
                </div>
            </div>
        </div>

        <!-- 步骤内容区域 -->
        <div class="step-content">
            <form id="rwaSetupForm">
                <!-- 步骤1：项目基础信息 -->
                <div class="step-panel active" id="step1">
                    <div class="step-title">
                        <span class="step-icon">📋</span>
                        项目基础信息
                    </div>
                    <div class="step-subtitle">
                        首先，让我们了解您的项目基本情况。这些信息将帮助我们为您量身定制最适合的RWA解决方案。
                    </div>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label for="projectName">项目名称 <span class="required">*</span></label>
                            <input type="text" id="projectName" name="projectName" required placeholder="例如：绿色能源产业园项目">
                            <div class="field-description">请填写您的RWA项目完整名称</div>
                        </div>
                        <div class="form-group">
                            <label for="projectType">项目类型 <span class="required">*</span></label>
                            <select id="projectType" name="projectType" required>
                                <option value="">请选择项目类型</option>
                                <option value="real_estate">🏢 房地产项目</option>
                                <option value="infrastructure">🏗️ 基础设施项目</option>
                                <option value="energy">⚡ 能源项目</option>
                                <option value="industrial">🏭 工业项目</option>
                                <option value="financial">💰 金融资产项目</option>
                                <option value="other">📦 其他项目</option>
                            </select>
                            <div class="field-description">选择您的RWA项目所属的主要行业类别</div>
                        </div>
                    </div>

                    <div class="form-row single">
                        <div class="form-group">
                            <label for="projectDescription">项目简介 <span class="required">*</span></label>
                            <textarea id="projectDescription" name="projectDescription" required placeholder="请详细描述您的项目背景、目标和预期收益..."></textarea>
                            <div class="field-description">详细说明项目的商业模式、盈利点和市场前景，有助于我们更好地为您设计代币化方案</div>
                        </div>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label for="projectLocation">项目所在地 <span class="required">*</span></label>
                            <input type="text" id="projectLocation" name="projectLocation" required placeholder="例如：上海市浦东新区">
                            <div class="field-description">项目资产的具体地理位置</div>
                        </div>
                        <div class="form-group">
                            <label for="projectStage">项目阶段 <span class="required">*</span></label>
                            <select id="projectStage" name="projectStage" required>
                                <option value="">请选择当前阶段</option>
                                <option value="planning">📋 规划阶段</option>
                                <option value="construction">🚧 建设阶段</option>
                                <option value="operation">🔄 运营阶段</option>
                                <option value="mature">✅ 成熟运营</option>
                            </select>
                            <div class="field-description">项目当前所处的发展阶段，影响代币化的时机和策略</div>
                        </div>
                    </div>

                    <div class="info-box">
                        <strong>💡 提示：</strong>请确保项目信息准确完整，这将影响后续的法律结构设计和合规方案制定。
                    </div>

                    <div class="subsection">
                        <div class="subsection-title">📞 联系信息</div>
                        <div class="form-row">
                            <div class="form-group">
                                <label for="contactPerson">项目联系人 <span class="required">*</span></label>
                                <input type="text" id="contactPerson" name="contactPerson" required placeholder="张先生">
                            </div>
                            <div class="form-group">
                                <label for="position">联系人职位</label>
                                <input type="text" id="position" name="position" placeholder="项目总监">
                            </div>
                        </div>

                        <div class="form-row">
                            <div class="form-group">
                                <label for="phone">联系电话 <span class="required">*</span></label>
                                <input type="tel" id="phone" name="phone" required placeholder="138-0000-0000">
                            </div>
                            <div class="form-group">
                                <label for="email">电子邮箱 <span class="required">*</span></label>
                                <input type="email" id="email" name="email" required placeholder="contact@company.com">
                            </div>
                        </div>

                        <div class="form-row">
                            <div class="form-group">
                                <label for="sponsorName">发起方名称 <span class="required">*</span></label>
                                <input type="text" id="sponsorName" name="sponsorName" required placeholder="XX投资有限公司">
                                <div class="field-description">项目发起的公司或机构名称</div>
                            </div>
                            <div class="form-group">
                                <label for="sponsorType">发起方类型</label>
                                <select id="sponsorType" name="sponsorType" required>
                                <option value="">请选择发起方类型</option>
                                <option value="private_company">🏢 私人企业</option>
                                <option value="public_company">🏛️ 上市公司</option>
                                <option value="fund">💼 投资基金</option>
                                <option value="individual">👤 个人投资者</option>
                                <option value="other">📦 其他机构</option>
                            </select>
                            <div class="field-description">选择项目发起方的主体类型，影响合规要求</div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- 步骤2：资产信息 -->
                <div class="step-panel" id="step2">
                    <div class="step-title">
                        <span class="step-icon">🏢</span>
                        资产详细信息
                    </div>
                    <div class="step-subtitle">
                        请详细描述您要进行数字化的现实世界资产，这些信息将用于资产评估和代币化方案设计。
                    </div>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label for="assetType">资产类型 <span class="required">*</span></label>
                            <select id="assetType" name="assetType" required>
                                <option value="">请选择资产类型</option>
                                <option value="real_estate">🏢 房地产（商业地产、住宅等）</option>
                                <option value="infrastructure">🏗️ 基础设施（道路、桥梁、公用设施）</option>
                                <option value="energy">⚡ 能源项目（风电、光伏、传统能源）</option>
                                <option value="industrial">🏭 工业资产（厂房、设备、产线）</option>
                                <option value="financial">💰 金融资产（债权、收益权）</option>
                                <option value="other">📦 其他类型</option>
                            </select>
                            <div class="field-description">选择最符合您项目的主要资产类型</div>
                        </div>
                        <div class="form-group">
                            <label for="assetSubtype">资产子类型详述</label>
                            <input type="text" id="assetSubtype" name="assetSubtype" placeholder="如：京秦高速某段、商业综合体、光伏电站等">
                        </div>
                    </div>

                    <div class="form-row single">
                        <div class="form-group">
                            <label for="assetDescription">资产详细描述 <span class="required">*</span></label>
                            <textarea id="assetDescription" name="assetDescription" required placeholder="请详细描述资产的地理位置、建设规模、运营状况、收益模式、市场地位等信息..."></textarea>
                            <div class="field-description">包括资产的物理特征、地理位置、技术参数、收益来源等关键信息</div>
                        </div>
                    </div>

                    <div class="form-row triple">
                        <div class="form-group">
                            <label for="assetValue">最新评估价值（万元） <span class="required">*</span></label>
                            <input type="number" id="assetValue" name="assetValue" required placeholder="10000">
                            <div class="field-description">请提供最新的专业评估价值，如无专业评估可提供市场参考价</div>
                        </div>
                        <div class="form-group">
                            <label for="valuationDate">评估日期</label>
                            <input type="date" id="valuationDate" name="valuationDate">
                            <div class="field-description">估值报告的出具日期或评估基准日</div>
                        </div>
                        <div class="form-group">
                            <label for="valuationMethod">评估方法</label>
                            <select id="valuationMethod" name="valuationMethod">
                                <option value="">请选择</option>
                                <option value="cost_approach">📊 成本法（重置成本扣减折旧）</option>
                                <option value="income_approach">💹 收益法（基于预期收益折现）</option>
                                <option value="market_approach">🏪 市场法（参考同类资产交易价格）</option>
                                <option value="multiple">🔄 多种方法综合</option>
                            </select>
                            <div class="field-description">选择用于确定资产价值的主要评估方法</div>
                        </div>
                    </div>
                </div>
                <!-- 步骤3：财务规划 -->
                <div class="step-panel" id="step3">
                    <div class="step-title">
                        <span class="step-icon">💰</span>
                        财务规划与收益模式
                    </div>
                    <div class="step-subtitle">
                        请提供资产的财务数据和收益预期，这将帮助我们设计合适的代币经济模型。
                    </div>

                    <div class="form-row triple">
                        <div class="form-group">
                            <label for="assetValue">💎 资产评估价值（万元） <span class="required">*</span></label>
                            <input type="number" id="assetValue" name="assetValue" required placeholder="请输入最新评估价值">
                            <div class="field-description">与步骤2中的评估价值保持一致</div>
                        </div>
                        <div class="form-group">
                            <label for="annualRevenue">📈 年收入（万元）</label>
                            <input type="number" id="annualRevenue" name="annualRevenue" placeholder="预期年收入">
                            <div class="field-description">资产每年产生的总收入，如租金、服务费等</div>
                        </div>
                        <div class="form-group">
                            <label for="annualProfit">💰 年净利润（万元）</label>
                            <input type="number" id="annualProfit" name="annualProfit" placeholder="预期年净利润">
                            <div class="field-description">扣除运营成本、税费后的净收益</div>
                        </div>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label for="annualReturn">📊 年化收益率（%）</label>
                            <input type="number" id="annualReturn" name="annualReturn" step="0.01" placeholder="预期年化收益率">
                            <div class="field-description">净利润/资产价值×100%，用于评估投资回报率</div>
                        </div>
                        <div class="form-group">
                            <label for="operationPeriod">⏰ 运营期限</label>
                            <select id="operationPeriod" name="operationPeriod">
                                <option value="">请选择运营期限</option>
                                <option value="short_term">🔸 短期（5年以内）</option>
                                <option value="medium_term">🔹 中期（5-15年）</option>
                                <option value="long_term">🔶 长期（15-30年）</option>
                                <option value="permanent">♾️ 永久运营</option>
                            </select>
                            <div class="field-description">资产预期的运营周期，影响代币的投资期限设计</div>
                        </div>
                    </div>
                </div>

                <!-- 步骤4：代币设计 -->
                <div class="step-panel" id="step4">
                    <div class="step-title">
                        <span class="step-icon">🪙</span>
                        代币权利设计偏好
                    </div>
                    <div class="step-subtitle">
                        请选择您希望代币持有者享有的权利，这将影响代币的价值和流动性。
                    </div>

                    <div class="form-group">
                        <label>🎯 代币持有者权利（可多选）</label>
                        <div class="field-description">选择代币持有者应享有的核心权利，建议至少选择收益分配权</div>
                        <div class="checkbox-group">
                            <div class="checkbox-item">
                                <input type="checkbox" id="revenue_share" name="tokenRights" value="revenue_share">
                                <label for="revenue_share">💰 收益分配权（按比例分享资产收益）</label>
                            </div>
                            <div class="checkbox-item">
                                <input type="checkbox" id="voting_rights" name="tokenRights" value="voting_rights">
                                <label for="voting_rights">🗳️ 治理投票权（参与重大决策投票）</label>
                            </div>
                            <div class="checkbox-item">
                                <input type="checkbox" id="transfer_rights" name="tokenRights" value="transfer_rights">
                                <label for="transfer_rights">🔄 转让流通权（可在二级市场交易）</label>
                            </div>
                            <div class="checkbox-item">
                                <input type="checkbox" id="info_rights" name="tokenRights" value="info_rights">
                                <label for="info_rights">📊 信息知情权（获取运营财务报告）</label>
                            </div>
                        </div>
                    </div>

                    <div class="subsection">
                        <div class="subsection-title">🎁 NFT发行模块需求</div>
                        <div class="form-group">
                            <label>NFT类型偏好（可多选）</label>
                            <div class="field-description">选择您希望发行的NFT类型，可作为代币的补充或独立发行</div>
                            <div class="checkbox-group">
                                <div class="checkbox-item">
                                    <input type="checkbox" id="ownership_nft" name="nftTypes" value="ownership_nft">
                                    <label for="ownership_nft">🏠 所有权凭证NFT（证明资产所有权）</label>
                                </div>
                                <div class="checkbox-item">
                                    <input type="checkbox" id="revenue_nft" name="nftTypes" value="revenue_nft">
                                    <label for="revenue_nft">💎 收益权NFT（享有收益分配权）</label>
                                </div>
                                <div class="checkbox-item">
                                    <input type="checkbox" id="access_nft" name="nftTypes" value="access_nft">
                                    <label for="access_nft">🔑 使用权NFT（享有资产使用权）</label>
                                </div>
                                <div class="checkbox-item">
                                    <input type="checkbox" id="commemorative_nft" name="nftTypes" value="commemorative_nft">
                                    <label for="commemorative_nft">🎖️ 纪念版NFT（收藏纪念价值）</label>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- 步骤5：合规要求 -->
                <div class="step-panel" id="step5">
                    <div class="step-title">
                        <span class="step-icon">⚖️</span>
                        合规与法律要求
                    </div>
                    <div class="step-subtitle">
                        请提供合规相关信息，确保项目符合相关法律法规要求。
                    </div>

                    <div class="form-group">
                        <label for="targetJurisdictions">🌍 目标司法管辖区（可多选）</label>
                        <div class="field-description">选择代币发行和交易的目标地区，影响合规要求和法律框架</div>
                        <div class="checkbox-group">
                            <div class="checkbox-item">
                                <input type="checkbox" id="hongkong" name="targetJurisdictions" value="hongkong">
                                <label for="hongkong">🇭🇰 香港（相对宽松的数字资产政策）</label>
                            </div>
                            <div class="checkbox-item">
                                <input type="checkbox" id="singapore" name="targetJurisdictions" value="singapore">
                                <label for="singapore">🇸🇬 新加坡（完善的数字资产监管框架）</label>
                            </div>
                            <div class="checkbox-item">
                                <input type="checkbox" id="usa" name="targetJurisdictions" value="usa">
                                <label for="usa">🇺🇸 美国（严格的证券法规要求）</label>
                            </div>
                            <div class="checkbox-item">
                                <input type="checkbox" id="eu" name="targetJurisdictions" value="eu">
                                <label for="eu">🇪🇺 欧盟（MiCA法规框架）</label>
                            </div>
                            <div class="checkbox-item">
                                <input type="checkbox" id="other_jurisdiction" name="targetJurisdictions" value="other">
                                <label for="other_jurisdiction">🌐 其他地区</label>
                            </div>
                        </div>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label for="kycLevel">🔍 KYC合规等级偏好</label>
                            <select id="kycLevel" name="kycLevel">
                                <option value="">请选择KYC等级</option>
                                <option value="basic">🟢 基础级（基本身份验证）</option>
                                <option value="standard">🟡 标准级（增强身份验证）</option>
                                <option value="enhanced">🔴 增强级（全面尽职调查）</option>
                            </select>
                            <div class="field-description">等级越高，投资者准入门槛越高，但合规性更强</div>
                        </div>
                        <div class="form-group">
                            <label for="amlCompliance">🛡️ AML反洗钱要求</label>
                            <select id="amlCompliance" name="amlCompliance">
                                <option value="">请选择AML要求</option>
                                <option value="basic">📋 基础监控（适用于小额交易）</option>
                                <option value="enhanced">🔍 增强监控（适用于大额交易）</option>
                                <option value="institutional">🏛️ 机构级监控（适用于机构投资者）</option>
                            </select>
                            <div class="field-description">根据目标投资者类型和交易规模选择合适的监控等级</div>
                        </div>
                    </div>
                </div>

                <!-- 步骤6：完成设置 -->
                <div class="step-panel" id="step6">
                    <div class="step-title">
                        <span class="step-icon">✅</span>
                        确认与提交
                    </div>
                    <div class="step-subtitle">
                        请确认您的设置信息，我们将根据您的需求为您定制RWA项目方案。
                    </div>

                    <div class="info-box">
                        <strong>📋 提交前确认清单：</strong>
                        <ul style="margin: 10px 0; padding-left: 20px;">
                            <li>✓ 项目基础信息已完整填写</li>
                            <li>✓ 资产信息已详细描述</li>
                            <li>✓ 财务规划已明确设定</li>
                            <li>✓ 代币权利设计已选择</li>
                            <li>✓ 合规要求已确认</li>
                        </ul>
                    </div>

                    <div class="form-group">
                        <div class="checkbox-item">
                            <input type="checkbox" id="riskAcknowledgment" name="riskAcknowledgment" value="acknowledged" required>
                            <label for="riskAcknowledgment">
                                <strong>⚠️ 风险确认：</strong>我已了解RWA项目涉及的相关风险，包括但不限于市场风险、技术风险、合规风险等，并同意承担相应责任。
                            </label>
                        </div>
                    </div>

                    <div class="form-row single">
                        <div class="form-group">
                            <label for="additionalRequirements">💭 其他特殊需求或备注</label>
                            <textarea id="additionalRequirements" name="additionalRequirements" placeholder="请描述任何其他特殊需求、期望或需要我们了解的信息..."></textarea>
                            <div class="field-description">如有特殊的技术要求、时间安排、预算限制等，请在此说明</div>
                        </div>
                    </div>
                </div>

                <!-- 导航按钮 -->
                <div class="step-navigation">
                    <button type="button" class="nav-btn btn-prev" id="prevBtn" onclick="changeStep(-1)">⬅️ 上一步</button>
                    <button type="button" class="nav-btn btn-next" id="nextBtn" onclick="changeStep(1)">下一步 ➡️</button>
                    <button type="submit" class="nav-btn btn-submit" id="submitBtn" style="display: none;">🚀 提交设置</button>
                </div>
            </form>
        </div>
    </div>

    <script>
        // 当前步骤
        let currentStep = 1;
        const totalSteps = 6;

        // 步骤切换函数
        function changeStep(direction) {
            const newStep = currentStep + direction;
            
            // 验证步骤范围
            if (newStep < 1 || newStep > totalSteps) {
                return;
            }
            
            // 如果是前进，验证当前步骤的必填字段
            if (direction > 0 && !validateCurrentStep()) {
                return;
            }
            
            // 隐藏当前步骤
            document.getElementById(`step${currentStep}`).classList.remove('active');
            document.querySelector(`[data-step="${currentStep}"]`).classList.remove('active');
            
            // 标记已完成的步骤
            if (direction > 0) {
                document.querySelector(`[data-step="${currentStep}"]`).classList.add('completed');
            }
            
            // 更新当前步骤
            currentStep = newStep;
            
            // 显示新步骤
            document.getElementById(`step${currentStep}`).classList.add('active');
            document.querySelector(`[data-step="${currentStep}"]`).classList.add('active');
            
            // 更新进度条
            updateProgressBar();
            
            // 更新按钮状态
            updateNavigationButtons();
            
            // 滚动到顶部
            document.querySelector('.step-content').scrollTop = 0;
        }

        // 验证当前步骤
        function validateCurrentStep() {
            const stepRequiredFields = {
                1: ['projectName', 'projectType', 'projectDescription', 'projectLocation', 'contactPerson', 'phone', 'email', 'sponsorName'],
                2: ['assetType', 'assetDescription', 'assetValue'],
                3: [], // 财务规划步骤没有必填字段
                4: [], // 代币设计步骤没有必填字段
                5: [], // 合规要求步骤没有必填字段
                6: ['riskAcknowledgment'] // 最后一步需要确认风险
            };
            
            const requiredFields = stepRequiredFields[currentStep] || [];
            const missingFields = [];
            
            requiredFields.forEach(fieldName => {
                const field = document.getElementById(fieldName) || document.querySelector(`[name="${fieldName}"]`);
                if (field) {
                    if (field.type === 'checkbox') {
                        if (!field.checked) {
                            missingFields.push(fieldName);
                        }
                    } else if (!field.value.trim()) {
                        missingFields.push(fieldName);
                    }
                }
            });
            
            if (missingFields.length > 0) {
                alert('请填写当前步骤的所有必填字段后再继续');
                // 聚焦到第一个未填写的字段
                const firstMissingField = document.getElementById(missingFields[0]) || document.querySelector(`[name="${missingFields[0]}"]`);
                if (firstMissingField) {
                    firstMissingField.focus();
                }
                return false;
            }
            
            return true;
        }

        // 更新进度条
        function updateProgressBar() {
            const progressPercentage = ((currentStep - 1) / (totalSteps - 1)) * 100;
            document.getElementById('progressLine').style.width = progressPercentage + '%';
        }

        // 更新导航按钮
        function updateNavigationButtons() {
            const prevBtn = document.getElementById('prevBtn');
            const nextBtn = document.getElementById('nextBtn');
            const submitBtn = document.getElementById('submitBtn');
            
            // 上一步按钮
            if (currentStep === 1) {
                prevBtn.style.display = 'none';
            } else {
                prevBtn.style.display = 'inline-block';
            }
            
            // 下一步/提交按钮
            if (currentStep === totalSteps) {
                nextBtn.style.display = 'none';
                submitBtn.style.display = 'inline-block';
            } else {
                nextBtn.style.display = 'inline-block';
                submitBtn.style.display = 'none';
            }
        }

        // 表单提交处理现在由form_processor.js处理
        // 这里只保留验证逻辑
        function handleFormSubmission() {
            // 最终验证
            if (!validateCurrentStep()) {
                return false;
            }
            return true;
        }
        
        // 为form_processor.js提供验证函数
        window.validateCurrentStep = validateCurrentStep;
        
        // 数据导出函数
        function exportToJSON(data) {
            const dataStr = JSON.stringify(data, null, 2);
            const dataUri = 'data:application/json;charset=utf-8,'+ encodeURIComponent(dataStr);
            
            const exportFileDefaultName = `RWA_Setup_${data.projectName || 'Project'}_${new Date().toISOString().split('T')[0]}.json`;
            
            const linkElement = document.createElement('a');
            linkElement.setAttribute('href', dataUri);
            linkElement.setAttribute('download', exportFileDefaultName);
            linkElement.click();
        }
        
        // 自动保存功能
        function autoSave() {
            const formData = new FormData(document.getElementById('rwaSetupForm'));
            const data = {};
            for (let [key, value] of formData.entries()) {
                data[key] = value;
            }
            data.currentStep = currentStep;
            sessionStorage.setItem('rwaSetupData', JSON.stringify(data));
        }
        
        // 每30秒自动保存一次
        setInterval(autoSave, 30000);
        
        // 页面加载时恢复数据和步骤
        window.addEventListener('load', function() {
            const savedData = sessionStorage.getItem('rwaSetupData');
            if (savedData) {
                const data = JSON.parse(savedData);
                
                // 恢复表单数据
                for (let [key, value] of Object.entries(data)) {
                    if (key === 'currentStep') continue;
                    
                    const field = document.getElementById(key) || document.querySelector(`[name="${key}"]`);
                    if (field) {
                        if (field.type === 'checkbox' || field.type === 'radio') {
                            field.checked = field.value === value;
                        } else {
                            field.value = value;
                        }
                    }
                }
                
                // 恢复步骤位置
                if (data.currentStep && data.currentStep > 1) {
                    // 隐藏当前步骤
                    document.getElementById(`step${currentStep}`).classList.remove('active');
                    document.querySelector(`[data-step="${currentStep}"]`).classList.remove('active');
                    
                    // 设置保存的步骤
                    currentStep = data.currentStep;
                    
                    // 显示保存的步骤
                    document.getElementById(`step${currentStep}`).classList.add('active');
                    document.querySelector(`[data-step="${currentStep}"]`).classList.add('active');
                    
                    // 标记之前的步骤为已完成
                    for (let i = 1; i < currentStep; i++) {
                        document.querySelector(`[data-step="${i}"]`).classList.add('completed');
                    }
                    
                    updateProgressBar();
                    updateNavigationButtons();
                }
            }
            
            // 初始化按钮状态
            updateNavigationButtons();
        });
        
        // 添加字段帮助提示功能
        function showFieldHelp(fieldId, helpText) {
            const field = document.getElementById(fieldId);
            if (field) {
                // 创建帮助提示元素
                const helpDiv = document.createElement('div');
                helpDiv.className = 'field-help';
                helpDiv.innerHTML = `💡 ${helpText}`;
                helpDiv.style.cssText = `
                    background: #e7f3ff;
                    border: 1px solid #b3d9ff;
                    border-radius: 5px;
                    padding: 8px 12px;
                    margin-top: 5px;
                    font-size: 0.85rem;
                    color: #0066cc;
                    display: none;
                `;
                
                // 插入帮助提示
                field.parentNode.appendChild(helpDiv);
                
                // 添加焦点事件
                field.addEventListener('focus', () => {
                    helpDiv.style.display = 'block';
                });
                
                field.addEventListener('blur', () => {
                    setTimeout(() => {
                        helpDiv.style.display = 'none';
                    }, 3000);
                });
            }
        }
        
        // 检查钱包连接状态
        function checkWalletStatus() {
            const walletStatusForm = document.getElementById('walletStatusForm');
            const walletStatusText = document.getElementById('walletStatusText');
            const isWalletConnected = localStorage.getItem('walletConnected');
            const walletAddress = localStorage.getItem('walletAddress');
            
            if (isWalletConnected === 'true' && walletAddress) {
                walletStatusForm.classList.add('connected');
                walletStatusForm.classList.remove('not-connected');
                walletStatusText.textContent = `钱包已连接: ${walletAddress.substring(0, 8)}...${walletAddress.substring(walletAddress.length - 6)}`;
                
                // 在表单数据中添加钱包地址
                const walletAddressInput = document.createElement('input');
                walletAddressInput.type = 'hidden';
                walletAddressInput.id = 'walletAddress';
                walletAddressInput.name = 'walletAddress';
                walletAddressInput.value = walletAddress;
                document.getElementById('rwaSetupForm').appendChild(walletAddressInput);
            } else {
                walletStatusForm.classList.add('not-connected');
                walletStatusForm.classList.remove('connected');
                walletStatusText.textContent = '钱包未连接 - 建议先连接钱包';
                
                // 显示警告信息
                setTimeout(() => {
                    if (confirm('检测到您尚未连接钱包，是否返回首页连接钱包？')) {
                        window.location.href = 'index.html';
                    }
                }, 2000);
            }
        }
        
        // 初始化字段帮助提示
        document.addEventListener('DOMContentLoaded', function() {
            // 检查钱包状态
            checkWalletStatus();
            
            // 为复杂字段添加帮助提示
            showFieldHelp('projectDescription', '请详细描述项目的商业模式、盈利方式、市场前景等，建议200字以上');
            showFieldHelp('assetDescription', '请描述资产的具体情况，包括地理位置、规模、现状、收益来源等关键信息');
            showFieldHelp('assetValue', '请提供最新的专业评估价值，如无专业评估可填写预估价值');
            showFieldHelp('annualReturn', '请填写预期的年化收益率，可参考同类资产的市场表现');
            showFieldHelp('kycLevel', '基础级适用于小额投资，标准级适用于中等投资，增强级适用于大额或机构投资');
        });
    </script>
    
    <!-- 引入表单处理脚本 -->
    <script src="form_processor.js"></script>
</body>
</html>